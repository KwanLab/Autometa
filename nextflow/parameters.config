#!/usr/bin/env nextflow

nextflow.enable.dsl=2

// **********
// FILEPATHS
// **********
// Data inputs
params.metagenome = null
// Where to store intermediate and final results:
params.interim = null
params.processed = null

// Database input
// NOTE: Directory path must contain:
// - diamond formatted nr file => nr.dmnd
// - Extracted files from tarball taxdump.tar.gz
params.ncbi_database = "$HOME/Autometa/autometa/databases/ncbi"

// Additional runtime settings
params.cpus = 2

// **********
// PARAMETERS
// **********

// Metagenome Length filtering
params.length_cutoff = 3000

// Kmer counting/normalization/embedding
params.kmer_size = 5
params.kmer_norm_method = "am_clr" // choices: "am_clr", "clr", "ilr"
params.kmer_pca_dimensions = 50
params.kmer_embed_method = "bhsne" // choices: "sksne", "bhsne", "umap"
params.kmer_embed_dimensions = 2

// Binning parameters
params.kingdom = "bacteria"
params.classification_kmer_pca_dimensions = 50
params.kmer_embed_method = "bhsne" // choices: "bhsne", "sksne", "umap"
params.clustering_method = "dbscan" // choices: "dbscan", "hdbscan"
params.binning_starting_rank = "superkingdom" // choices: "superkingdom", "phylum", "class", "order", "family", "genus", "species"
params.classification_method = "decision_tree" // choices: "decision_tree", "random_forest"
params.completeness = 20.0
params.purity = 90.0
